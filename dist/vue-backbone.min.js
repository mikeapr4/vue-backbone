/*!
 * Vue-Backbone v0.2.0
 * https://github.com/mikeapr4/vue-backbone
 * @license MIT
 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.VueBackbone=n():e.VueBackbone=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=2)}([function(e,n,t){"use strict";function o(e,n){return i.indexOf(n)>-1?function(){var n=e.apply(this,arguments);return n&&(n._vuebackbone_proxy||n.map(function(e){return e._vuebackbone_proxy}))||n}:e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){var t=e.map(function(e){return e._vuebackbone_proxy});for(var i in e)if("function"==typeof e[i]&&"constructor"!==i&&(n||-1===r.indexOf(i))){var a=e[i].bind(e);n||(a=o(a,i)),Object.defineProperty(t,i,{value:a})}return Object.defineProperty(t,"_vuebackbone_original",{value:e}),t};var r=["slice","forEach","map","reduce","reduceRight","find","filter","every","some","indexOf","lastIndexOf","findIndex"],i=["pop","shift","remove","get","at","where","findWhere","reject","sortBy","shuffle","toArray","detect","select","first","head","take","rest","tail","drop","initial","last","without"]},function(e,n,t){"use strict";function o(e,n,t,o){var r=n.get.bind(n,t),i=n.set.bind(n,t),a=e[t]?o+t:t;Object.defineProperty(e,a,{enumerable:!0,get:r,set:i})}function r(e,n,t,o){var r=function(){var e=n.get(t);return e&&e._vuebackbone_proxy||e},i=function(e){n.set(t,e&&e._vuebackbone_original||e)},a=e[t]?o+t:t;Object.defineProperty(e,a,{enumerable:!0,get:r,set:i})}function i(e,n,t){var i={};for(var a in e)if("function"==typeof e[a]&&"constructor"!==a){var u=e[a].bind(e);Object.defineProperty(i,a,{value:u})}if(t&&e.relations){var c=e.relations.map(function(e){return e.key});c.forEach(function(t){r(i,e,t,n)}),Object.keys(e.attributes).filter(function(e){return!c.includes(e)}).forEach(function(t){o(i,e,t,n)})}else Object.keys(e.attributes).forEach(function(t){o(i,e,t,n)});return i.id||Object.defineProperty(i,"id",{get:function(){return e.id}}),Object.defineProperty(i,"_vuebackbone_original",{value:e}),i}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){g.proxies&&!e._vuebackbone_proxy&&(e.models?(e.each(r),e._vuebackbone_proxy=(0,m.default)(e,g.simpleCollectionProxy)):(e._vuebackbone_proxy=(0,x.default)(e,g.conflictPrefix,g.associations),g.associations&&e.relations&&e.relations.forEach(function(n){var t=e.get(n.key);t&&r(t)})))}function i(e,n){if(g.associations&&e.relations&&!n.includes(e)){n.push(e);var t=Object.assign({},e.attributes);return e.relations.forEach(function(o){var r=e.attributes[o.key];r&&(t[o.key]=u(r,n))}),t}return e.attributes}function a(e,n){return e.map(function(e){return i(e,n)})}function u(e,n){return e.models?a(e,n):i(e,n)}function c(e){return g.addComputed&&g.proxies?g.dataPrefix+e:e}function f(e,n,t,o){g.proxies&&(o.on("add",r),t.onreset=function(){return o.each(r)},o.on("reset",t.onreset)),t.onchange=function(){if(e.$data[c(n)]=a(o,[]),g.proxies){var t=o._vuebackbone_proxy;t.length=0,o.forEach(function(e,n){return t[n]=e._vuebackbone_proxy})}},o.on("reset sort remove add",t.onchange)}function s(e,n){g.associations&&n.relations&&n.relations.forEach(function(e){n.on("change:"+e.key,function(e,n){return n&&r(n)})}),e.onchange=function(){n.keys().length>Object.keys(n._previousAttributes).length&&console.warn("VueBackbone: Adding new Model attributes after binding is not supported, provide defaults for all properties")},n.on("change",e.onchange)}function b(e,n){var t=e._vuebackbone[n],o=t.bb;o.models?f(e,n,t,o):s(t,o)}function p(e,n){var t=e._vuebackbone[n];t&&(t.bb.off(null,t.onchange),t.onreset&&t.bb.off(null,t.onreset))}function d(e,n){var t=e.$options.data,o=u(e._vuebackbone[n].bb,[]),r=c(n);e.$options.data=function(){var e={},i=t?t():{};if(i.hasOwnProperty(n))throw"VueBackbone: Property '"+n+"' mustn't exist within the Vue data already";if(i.hasOwnProperty(r))throw"VueBackbone: Property '"+r+"' mustn't exist within the Vue data already";return Object.keys(i).forEach(function(n){return e[n]=i[n]}),e[r]=o,e}}function l(e,n){var t=e._vuebackbone[n],o=c(n);e.$bb=e.$bb||{},Object.defineProperty(e.$bb,n,{get:function(){e.$data[o];return t.bb},set:function(r){p(e,n),t.bb=r,e.$data[o]=u(r,[]),b(e,n)}})}function v(e,n){var t=e._vuebackbone[n],o=c(n),i=e.$options;i.computed=i.computed||{},i.computed[n]?console.warn("VueBackbone: Generated computed function '"+n+"' already exists within the Vue computed functions"):i.computed[n]={get:function(){e.$data[o];return t.bb._vuebackbone_proxy},set:function(i){p(e,n),r(i),t.bb=i,e.$data[o]=u(i,[]),b(e,n)}}}function y(e,n,t,o){e._vuebackbone[n]={bb:t},r(t),o||(d(e,n),g.addComputed&&g.proxies?v(e,n):l(e,n)),b(e,n)}function _(e){return g.proxies?function(){var n=e.apply(this,arguments);return n&&(n._vuebackbone_proxy||n.map(function(e){return e._vuebackbone_proxy}))||n}:function(){var n=e.apply(this,arguments);return n&&(n.attributes||n.map(function(e){return e.attributes}))||n}}function h(e,n){for(var t in n)n.hasOwnProperty(t)&&(g[t]=n[t]);e.mixin(O)}function k(e){return e._vuebackbone_original||e}Object.defineProperty(n,"__esModule",{value:!0}),n.mapBBModels=_,n.install=h,n.original=k;var x=o(t(1)),m=o(t(0)),g={proxies:!0,conflictPrefix:"$",addComputed:!0,dataPrefix:"_",simpleCollectionProxy:!1,associations:!1},O={beforeCreate:function(){var e=this,n=e.$options.bb;if(n){if("function"!=typeof n)throw"VueBackbone: 'bb' initialization option must be a function";n=n(),e._vuebackbone={},Object.keys(n).forEach(function(t){var o=n[t],r=!1;if(!0===o.prop){if(!e.$options.propsData||!e.$options.propsData[t])throw"VueBackbone: Missing Backbone object in Vue prop '"+t+"'";o=e.$options.propsData[t],r=!0}if(!(o=o._vuebackbone_original||o).on||!o.attributes&&!o.models)throw"VueBackbone: Unrecognized Backbone object in Vue instantiation ("+t+"), must be a Collection or Model";y(e,t,o,r)})}},destroyed:function(){var e=this,n=e._vuebackbone;n&&Object.keys(n).forEach(function(n){return p(e,n)})}};n.default={install:h,mapBBModels:_,original:k}}])});